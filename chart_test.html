<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<canvas id="myChart"></canvas>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript">

	var timeNow = new Date().toLocaleTimeString();
	var dataQueue = [];  // queue for storing data
	//var ctx = document.getElementById('myChart').getContext('2d');
	var config =  {
	    // The type of chart we want to create
	    type: 'line',

	    // The data for our dataset
	    data: {
	        labels: [],
	        datasets: [{
	            label: "My First dataset",
	            backgroundColor: 'rgb(255, 99, 132)',
	            borderColor: 'rgb(255, 99, 132)',
	            data: [],
	        }]
	    },

	    // Configuration options go here
	    options: {}
	};

	
	window.onload = function() {
            var ctx = document.getElementById("myChart").getContext("2d");
            window.myLine = new Chart(ctx, config);
        };

	var inter = setInterval(function () {
            updateData();
        }, 5000);
	function updateData(){
		console.log("In update function");
		//var timeNow = new Date().toLocaleTimeString();
		//var randomData = function() {
        //    return Math.round(Math.random() * 10);
        //};
        //var randData = randomData();
        $.ajax({
                url: "http://localhost:5000/api/test_tasks",
                async: true,
                dataType: 'json',
                type: 'GET',
                success: function(data) {
                    //alert(data.tasks.myData);
                    //alert(data.feeds[0].entry_id);
                    //alert()
                   	console.log("data :"+ data.tasks.myData);
                	console.log("time :"+ data.tasks.timestamp);
                	config.data.datasets[0].data.push(data.tasks.myData);
                	config.data.labels.push(data.tasks.timeStamp);
                	dataQueue.push(data.tasks.myData);
                	console.log(dataQueue);
                }
            });
        
        window.myLine.update();

	}

</script>
</body>
</html>